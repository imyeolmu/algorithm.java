### 공지사항 목록

3.service처리/테스트
---


- Noticeservice.java

```java
public  List<NoticeVO> Noticelist();
```    
게시판 목록을 받아야함으로  위의 형태의 메소드를 리턴타입으로 받는다



- Noticeservicelmpl.java

```java
	public List<NoticeVO> Noticelist() {

		return noticemapper.Noticelist();
	}

```

오버라이딩하여 구현 한다 

----
&nbsp;

service 테스트


메서드 테스트 해보기

```java
public void NoticelistGet() {
	
	
	
	 service.Noticelist().forEach(notice->System.out.println("" + notice));

    }
}
```

&nbsp;

----
4.Cotroller 처리 하기전에 페이징 클래스 만들기
---

&nbsp;

-PageDTO


```java
package com.supermm.model;

import lombok.Data;

@Data //lombok
public class PageMakeDTO {
   private int startPage; //시작페이지
   private int endPage; //끝페이지
   private boolean prev, next; //이전페이지, 다음페이지 존재유무
   private int total; //전체 게시물 수
   private int realEnd; //전체 마지막페이지
   private int realStart; //전체 시작페이지
   private Criteria cri; //현재페이지, 페이지당 게시물 표시수 정보
   
   
   //생성자
   public PageMakeDTO(Criteria cri,int total) {
   
      this.cri = cri;
      this.total = total;
      
      //마지막페이지
      this.endPage = (int)(Math.ceil(cri.getPageNum()/10.0))*10;
      
      //시작페이지
      this.startPage = this.endPage - 9;
      
      //전체 마지막페이지
      this.realEnd = (int)(Math.ceil(total * 1.0/cri.getAmount()));

      //전체 시작페이지
      this.realStart = this.realEnd - (this.realEnd-1);
      
      //전체 마지막페이지(realEnd)가 화면에 보이는 마지막페이지(endPage)보다 작은 경우, 보이는 페이지(endPage)값 조정 (화면에 보일 마지막페이지 유효성 체크)
      if(realEnd < this.endPage) {
         this.endPage = realEnd;
      }
      
      //시작페이지(startPage)값이 1보다 큰 경우 true
      this.prev = this.startPage > 1;
      
      //마지막페이지(endPage)값이 1보다 큰 경우 true 
      this.next = this.endPage < realEnd;
   }
   
   
   
}


```

페이지 이동 인터페이스를 출력 시키는데 필요한 데이터 모임이다

pageDTO를 인스턴스화 시키기 위해서는 처음에 만든 Criteria 클래스의 데이터와 전체 데이터 개수 값이 필요하다 : 두개 데이터를 pageDTO 클래스 생성자 매개 변수로 부여하였음

&nbsp;


total값은 anotice 테이블의 총 행의 개수이다


- NoticeMapper.java
```java

	//공지사항 총 갯수
	public int getNoticeTotal(Criteria cri);
```
갯수를 받아야 하기 때문에 선언부의 리턴 타입은 int형이다

조건문에 올 keyword로 인해 cri를 받는다 


&nbsp;


- NoticeMapper.xml

```java
	<!--공지사항 갯수 -->
	<select id="getNoticeTotal" resultType="int">
		select count(*) from ANOTICE

		<if test="keyWord != null">

			where ntitle like '%'||#{keyWord}||'%'
		</if>
	</select>

```

검색 조건에 따라서 페이지 개수가 변해야 하는데 조건문을 적용하지 않으면 view에 출력되는 

페이지 이동 인터페이스에 실제 존재해야 할 페이지 개수보다 더많은 페이지보다 더 많기 

때문에 where문을 사용한다 

---

&nbsp;


4.페이징 service 처리하기
---
- Noticeservice.java
```java
//공지사항 총 개수
public int getNoticeTotal(ClientCriteria cri);
```
&nbsp;


- Noticeserviceimpl.java

```java
	public int getNoticeTotal(Criteria cri) {

		return noticemapper.getNoticeTotal(cri);
	}
```