### 공지사항 목록



순서 
===

1.Criteria 작성

2.Mapper처리/테스트 

3.service처리/테스트

4.페이징 클래스 처리

5.페이징 service 처리

5.controller 처리/테스트

6..view 처리


-----------------------


&nbsp;


1.criteria 작성
---

```java

public class Criteria { 
	private int pageNum; //현재페이지
	private int amount; //한페이지당 보여질 게시물 개수	
	

	////////search ///////////
	private String searchType;  //검색타입
	private String[] searchTypeArr; //검색타입 배열
	
	private String keyWord; //검색키워드
	
	//기본생성자 : 기본세팅(pageNum=1, amount=5)
	public Criteria() {
		this(1, 5);
	}
	
	//생성자 : 원하는 pageNum, amount
	public Criteria(int pageNum, int amount) {
		this.pageNum = pageNum;
		this.amount = amount;
	}
	
	public void setSearchType(String searchType) {
		this.searchType = searchType;
		this.searchTypeArr = searchType.split("");
	}
}
```
지정한 개수와 검색 조건에 따라서 공지사항 데이터를 출력하는 쿼리를 실행하게 하는데 필요로 하는 데이터 모임이다

페이지를 처리할 critera를 만들어 준다


&nbsp;

2.Mapper처리 및 테스트
---

&nbsp;

- NoticeMapper.java

```java
 //게시판 목록이동
	public List<NoticeVO> Noticelist();
```
```java
//게시판 페이징한 목록 
public List<NoticeVO> getNoticePaging(Criteria cri);
```


__*1. SELECT 결과 하나의 행에 대한 정보만 얻을 경우 VO를 클래스타입으로 받아도 되나 리스트 같이 두개의 행으로 이루 어져 있을 경우 List타입으로 반환 받는다*__

__*2. List는 배열과 다르게 삽입되는 데이터에 따라 크기가 동적으로 변한다*__

NoticVO임을 명시하기 위해 NoticeVO제네릭을 선언한다

&nbsp;


&nbsp;

 - NoticeMapper.xml

목록 페이지 
```xml
<select id="Noticelist" resultType="com.supermm.model.NoticeVO">
		select * from anotice order by nno
	</select>

```

&nbsp;


&nbsp;



페이징 처리한 목록 페이지

```xml

<select id="getNoticePaging"
		resultType="com.supermm.model.NoticeVO">	
		  <![CDATA[
        
        select nno, ntitle, nwriter_id, ncontent, nregdate, updatedate from(
        
                select  rownum  as rn, nno, ntitle, nwriter_id, ncontent, nregdate, updatedate
                  
                from anotice where rownum <= #{pageNum} * #{amount} 
    ]]>            
                <if test="keyword != null">
                    and ntitle like '%'||#{keyword}||'%' 
                </if>
    
    <![CDATA[
                    
                )
                    
        where rn > (#{pageNum} -1) * #{amount}
    
    ]]>
    
 </select>

```


__*CDATA 구문 : 쿼리문에 문자열 비교 연산자나 부등호를 처리해야 할 경우가 발생 할때 
CDATA 구문으로 감싸면 인식 가능하다
(EX) > 같은 경우 태그로 인식하는데 CDATA 구문을 사용할 경우 부등호로 인식한다)*__


주제별 검색 기능 구현에 필요한 쿼리문을 담고 있다

---


&nbsp;

Mapper Test하기 

메서드 테스트 해보기

- NoticeMapperTest.java

```java

	//게시판 목록 테스트

	public void NoticelistGet() {
	
	// 일반적인 for 문 
	List list = mapper.Noticelist();
	for(int i=0; i <list.size(); i++) {
		
		System.out.println("" + list.get(i));
		
		//foreach문(향상된 for문)
		for(Object a: list){
			System.out.println("" + a);
		}
		//foreach문 & 람다식
		list.forEach(notice->System.out.println("" + notice));
			
			
		}
	

	}


}
```